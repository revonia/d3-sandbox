(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{283:function(e,t,r){},417:function(e,t,r){"use strict";var n=r(283);r.n(n).a},479:function(e,t,r){"use strict";r.r(t);r(319),r(320),r(321),r(218),r(186);var n=r(221),a=(r(220),r(63),r(227),r(225),r(226)),s=(r(54),r(191),r(197),r(219),r(257),r(258),r(390),r(280)),i=r(281),o=r(391);function c(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}var u=function(){function e(t){Object(s.a)(this,e),this.win=null,this.dataset=null,this.options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({base:"/",resourcesMap:{},codes:[],lang:""},t);var r=e.loadingOrder;this.options.codes.sort(function(e,t){return r.indexOf(e.type)-r.indexOf(t.type)}),this.resolvedConfig=null,this.attached=!1}var t;return Object(i.a)(e,[{key:"_loadConfigYaml",value:function(e){var t=this,r=new o.Type("!resource",{kind:"scalar",construct:function(e){return t.options.resourcesMap[e]||e}}),n=o.Schema.create([r]);return o.load(e,{schema:n})}},{key:"_applyConfig",value:(t=Object(a.a)(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.attached){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getConfig(),r=this.win.document,!Array.isArray(t.js)){e.next=12;break}n=regeneratorRuntime.mark(function e(n){var a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.createElement("script"),s=new Promise(function(e){a.onload=e}),a.type="application/javascript",a.src=i.withBase(t.js[n]),r.head.append(a),e.next=7,s;case 7:case"end":return e.stop()}},e)}),a=0;case 7:if(!(a<t.js.length)){e.next=12;break}return e.delegateYield(n(a),"t0",9);case 9:a++,e.next=7;break;case 12:if(!Array.isArray(t.css)){e.next=20;break}s=regeneratorRuntime.mark(function e(n){var a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.createElement("link"),s=new Promise(function(e){a.onload=e}),a.rel="stylesheet",a.type="text/css",a.href=i.withBase(t.css[n]),r.head.append(a),e.next=8,s;case 8:case"end":return e.stop()}},e)}),a=0;case 15:if(!(a<t.css.length)){e.next=20;break}return e.delegateYield(s(a),"t1",17);case 17:a++,e.next=15;break;case 20:this.configApplied=!0;case 21:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_loadCode",value:function(e,t){var r=this,n=this.win.document;return new Promise(function(a){switch(e){case"javascript":var s=n.createElement("script");s.type="application/javascript",s.appendChild(n.createTextNode(t)),n.head.appendChild(s),a();break;case"css":var i=n.createElement("style");i.innerHTML=t,n.head.appendChild(i),a();break;case"html":n.body.innerHTML=t,a();break;case"dataset":try{r.dataset=JSON.parse(t)}catch(e){}a();break;default:a()}})}},{key:"getResource",value:function(e){return this.withBase(this.options.resourcesMap[e])}},{key:"getDataset",value:function(){return this.dataset}},{key:"withBase",value:function(e){return"/"===e[0]?this.options.base+e.slice(1):e}},{key:"getConfig",value:function(){if(!this.resolvedConfig){this.resolvedConfig={};for(var e=null,t=0;t<this.options.codes.length;t++)"config"===this.options.codes[t].type&&(e=this.options.codes[t].code);null!=e&&(this.resolvedConfig=this._loadConfigYaml(e))}return this.resolvedConfig}},{key:"attach",value:function(e){var t=this;if(!this.attached)return new Promise(function(r){e.onload=Object(a.a)(regeneratorRuntime.mark(function n(){var a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.win=e.contentWindow,t.win.$sandbox=t,n.next=4,t._applyConfig();case 4:a=t.options.codes,s=0;case 6:if(!(s<a.length)){n.next=12;break}return n.next=9,t._loadCode(a[s].type,a[s].code);case 9:s++,n.next=6;break;case 12:t.attached=!0,r(t.win);case 14:case"end":return n.stop()}},n)})),e.src=t.iframeTemplate()})}},{key:"iframeTemplate",value:function(){return"javascript: '\n<!DOCTYPE html>\n<html lang=\"".concat(this.options.lang,'">\n<head>\n  <meta charset="UTF-8">\n  <title>Preview</title>\n</head>\n<body>\n</body>\n</html>\'').replace(/\n/g,"")}}]),e}();u.loadingOrder=["config","css","html","json","javascript"];var l=u;function h(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p,f,g,v={name:"CodeSandbox",components:{},props:{tabs:{type:Array,default:function(){return[{name:"javascript",selector:"@pre.language-js > code",language:"javascript"},{name:"css",selector:"@pre.language-css > code",language:"css"},{name:"html",selector:"@pre.language-html > code",language:"html"},{name:"dataset.json",selector:"@pre.language-json > code",language:"javascript",type:"dataset"},{name:"config.yaml",selector:"@pre.language-yaml > code",language:"yaml",type:"config"}]}},previewFirst:{type:Boolean,default:!0},initialHeight:{type:String,default:"300px"}},data:function(){return{tabData:new Map,currentTab:"",sourcesLoaded:!1,showPreview:!1,showEditor:!1,loading:!1,innerHeight:null}},computed:{height:function(){return null===this.innerHeight?this.initialHeight:this.innerHeight}},created:function(){this.editor=null,this.$options.beforeDestroy||(this.$options.beforeDestroy=[])},mounted:(g=Object(a.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadSources(),this.loading=!0,e.next=4,Promise.all([r.e(0),r.e(8),r.e(25)]).then(r.bind(null,478));case 4:t=e.sent,this.renderEditor(t),this.previewFirst?this.preview():this.changeTab(this.tabs[0].name);case 7:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)}),methods:{getTabData:function(e){return this.tabData.has(e)||this.tabData.set(e,{source:null,state:null,model:null}),this.tabData.get(e)},loadSources:function(){var e=this,t=this.$refs.sourceContainer;this.tabs.forEach(function(r){var n=r.selector&&"@"===r.selector[0]?t.querySelector(r.selector.substr(1)):document.querySelector(r.selector);n&&(e.getTabData(r.name).source=n.textContent)}),this.sourcesLoaded=!0},renderEditor:function(e){var t=this,r=e.monaco;if(!this.editor){this.loading=!0;var n=this.$refs.editor;this.editor=r.editor.create(n,{theme:"vs-dark",minimap:{enabled:!1}}),this.tabs.forEach(function(e){var n=e.name,a=t.getTabData(n);a.model=r.editor.createModel(a.source,e.language)}),this.editor.setModel(this.getTabData(this.currentTab).model),this.$options.beforeDestroy.push(function(){t.editor.dispose()}),this.loading=!1}},changeTab:(f=Object(a.a)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}return this.showEditor=!1,this.currentTab="",e.abrupt("return");case 4:return this.currentTab&&(this.getTabData(this.currentTab).state=this.editor.saveViewState()),this.currentTab=t,r=this.getTabData(t),this.editor.setModel(r.model),null!==r.state&&this.editor.restoreViewState(r.state),this.showEditor=!0,this.showPreview=!1,e.next=13,this.$nextTick();case 13:this.editor.focus(),this.editor.layout(),this.loading=!1;case 16:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)}),preview:(p=Object(a.a)(regeneratorRuntime.mark(function e(){var t,r,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.loading=!0,t=this.$refs.previewBox;t.firstChild;)t.removeChild(t.firstChild);r=document.createElement("iframe"),n=this.tabs.map(function(e){return{code:a.getTabData(e.name).model.getValue(),type:e.type||e.language}}),new l({codes:n,resourcesMap:d({},this.$themeConfig.resourcesMap),base:this.$site.base,lang:this.$lang}).attach(r).then(function(){a.loading=!1}),t.appendChild(r),this.showPreview=!0,this.changeTab("");case 10:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})}},b=(r(417),r(8)),m=Object(b.a)(v,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"code-sandbox"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.sourcesLoaded,expression:"sourcesLoaded"}],staticClass:"main-container"},[r("div",{staticClass:"toolbar"},[r("ul",{staticClass:"actions"},[r("li",[r("button",{staticClass:"btn tab-btn",class:{active:e.showPreview},attrs:{type:"button"},on:{click:e.preview}},[e._v("\n            Run & Preview\n          ")])]),e._l(e.tabs,function(t){return r("li",{key:t.name},[r("button",{staticClass:"tab-btn btn",class:{active:e.currentTab===t.name},attrs:{type:"button"},on:{click:function(r){return e.changeTab(t.name)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])])})],2)]),e._v(" "),r("div",{staticClass:"box",style:{height:e.height}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showEditor,expression:"showEditor"}],staticClass:"editor-container"},[r("div",{ref:"editor",staticClass:"editor"})]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreview,expression:"showPreview"}],staticClass:"preview-container"},[r("div",{ref:"previewBox",staticClass:"preview-box"})]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading"},[r("div",{staticClass:"loading-text"},[e._v("\n          Loading...\n        ")])])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.sourcesLoaded,expression:"!sourcesLoaded"}],ref:"sourceContainer",staticClass:"source-container"},[e._t("default")],2)])},[],!1,null,null,null);t.default=m.exports}}]);