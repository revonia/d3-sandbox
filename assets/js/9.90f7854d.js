(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{210:function(e,t,a){},417:function(e,t,a){"use strict";var n=a(210);a.n(n).a},472:function(e,t,a){"use strict";a.r(t);var n=a(290),r=(a(195),a(367),a(264),a(265),a(266)),s=(a(131),a(242),a(381),a(194),a(251),a(252),a(388),a(389)),i=a(390),o=a(391),c=function(){function e(t){Object(s.a)(this,e),this.win=null,this.dataset=null,this.options=Object(n.a)({base:"/",resourcesMap:{},codes:[],lang:""},t);var a=e.loadingOrder;this.options.codes.sort(function(e,t){return a.indexOf(e.type)-a.indexOf(t.type)}),this.resolvedConfig=null,this.attached=!1}return Object(i.a)(e,[{key:"_loadConfigYaml",value:function(e){var t=this,a=new o.Type("!resource",{kind:"scalar",construct:function(e){return t.options.resourcesMap[e]||e}}),n=o.Schema.create([a]);return o.load(e,{schema:n})}},{key:"_applyConfig",value:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,a,n,r,s,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.attached){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getConfig(),a=this.win.document,!Array.isArray(t.js)){e.next=12;break}n=regeneratorRuntime.mark(function e(n){var r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.createElement("script"),s=new Promise(function(e){r.onload=e}),r.type="application/javascript",r.src=i.withBase(t.js[n]),a.head.append(r),e.next=7,s;case 7:case"end":return e.stop()}},e)}),r=0;case 7:if(!(r<t.js.length)){e.next=12;break}return e.delegateYield(n(r),"t0",9);case 9:r++,e.next=7;break;case 12:if(!Array.isArray(t.css)){e.next=20;break}s=regeneratorRuntime.mark(function e(n){var r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.createElement("link"),s=new Promise(function(e){r.onload=e}),r.rel="stylesheet",r.type="text/css",r.href=i.withBase(t.css[n]),a.head.append(r),e.next=8,s;case 8:case"end":return e.stop()}},e)}),r=0;case 15:if(!(r<t.css.length)){e.next=20;break}return e.delegateYield(s(r),"t1",17);case 17:r++,e.next=15;break;case 20:this.configApplied=!0;case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_loadCode",value:function(e,t){var a=this,n=this.win.document;return new Promise(function(r){switch(e){case"javascript":var s=n.createElement("script");s.type="application/javascript",s.appendChild(n.createTextNode(t)),n.head.appendChild(s),r();break;case"css":var i=n.createElement("style");i.innerHTML=t,n.head.appendChild(i),r();break;case"html":n.body.innerHTML=t,r();break;case"dataset":try{a.dataset=JSON.parse(t)}catch(e){}r();break;default:r()}})}},{key:"getResource",value:function(e){return this.withBase(this.options.resourcesMap[e])}},{key:"getDataset",value:function(){return this.dataset}},{key:"withBase",value:function(e){return"/"===e[0]?this.options.base+e.slice(1):e}},{key:"getConfig",value:function(){if(!this.resolvedConfig){this.resolvedConfig={};for(var e=null,t=0;t<this.options.codes.length;t++)"config"===this.options.codes[t].type&&(e=this.options.codes[t].code);null!=e&&(this.resolvedConfig=this._loadConfigYaml(e))}return this.resolvedConfig}},{key:"attach",value:function(e){var t=this;if(!this.attached)return new Promise(function(a){e.onload=Object(r.a)(regeneratorRuntime.mark(function n(){var r,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.win=e.contentWindow,t.win.$sandbox=t,n.next=4,t._applyConfig();case 4:r=t.options.codes,s=0;case 6:if(!(s<r.length)){n.next=12;break}return n.next=9,t._loadCode(r[s].type,r[s].code);case 9:s++,n.next=6;break;case 12:t.attached=!0,a(t.win);case 14:case"end":return n.stop()}},n)})),e.src=t.iframeTemplate()})}},{key:"iframeTemplate",value:function(){return"javascript: '\n<!DOCTYPE html>\n<html lang=\"".concat(this.options.lang,'">\n<head>\n  <meta charset="UTF-8">\n  <title>Preview</title>\n</head>\n<body>\n</body>\n</html>\'').replace(/\n/g,"")}}]),e}();c.loadingOrder=["config","css","html","json","javascript"];var u=c,l={name:"CodeSandbox",components:{},props:{tabs:{type:Array,default:function(){return[{name:"javascript",selector:"@pre.language-js > code",language:"javascript"},{name:"css",selector:"@pre.language-css > code",language:"css"},{name:"html",selector:"@pre.language-html > code",language:"html"},{name:"dataset.json",selector:"@pre.language-json > code",language:"javascript",type:"dataset"},{name:"config.yaml",selector:"@pre.language-yaml > code",language:"yaml",type:"config"}]}},previewFirst:{type:Boolean,default:!0},initialHeight:{type:String,default:"300px"}},data:function(){return{tabData:new Map,currentTab:"",sourcesLoaded:!1,showPreview:!1,showEditor:!1,loading:!1,innerHeight:null}},computed:{height:function(){return null===this.innerHeight?this.initialHeight:this.innerHeight}},created:function(){this.editor=null,this.$options.beforeDestroy||(this.$options.beforeDestroy=[])},mounted:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadSources(),this.loading=!0,e.next=4,Promise.all([a.e(0),a.e(4),a.e(16)]).then(a.bind(null,470));case 4:t=e.sent,this.renderEditor(t),this.previewFirst?this.preview():this.changeTab(this.tabs[0].name);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{getTabData:function(e){return this.tabData.has(e)||this.tabData.set(e,{source:null,state:null,model:null}),this.tabData.get(e)},loadSources:function(){var e=this,t=this.$refs.sourceContainer;this.tabs.forEach(function(a){var n=a.selector&&"@"===a.selector[0]?t.querySelector(a.selector.substr(1)):document.querySelector(a.selector);n&&(e.getTabData(a.name).source=n.textContent)}),this.sourcesLoaded=!0},renderEditor:function(e){var t=this,a=e.monaco;if(!this.editor){this.loading=!0;var n=this.$refs.editor;this.editor=a.editor.create(n,{theme:"vs-dark",minimap:{enabled:!1}}),this.tabs.forEach(function(e){var n=e.name,r=t.getTabData(n);r.model=a.editor.createModel(r.source,e.language)}),this.editor.setModel(this.getTabData(this.currentTab).model),this.$options.beforeDestroy.push(function(){t.editor.dispose()}),this.loading=!1}},changeTab:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}return this.showEditor=!1,this.currentTab="",e.abrupt("return");case 4:return this.currentTab&&(this.getTabData(this.currentTab).state=this.editor.saveViewState()),this.currentTab=t,a=this.getTabData(t),this.editor.setModel(a.model),null!==a.state&&this.editor.restoreViewState(a.state),this.showEditor=!0,this.showPreview=!1,e.next=13,this.$nextTick();case 13:this.editor.focus(),this.editor.layout(),this.loading=!1;case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),preview:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,a,r,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.loading=!0,t=this.$refs.previewBox;t.firstChild;)t.removeChild(t.firstChild);a=document.createElement("iframe"),r=this.tabs.map(function(e){return{code:s.getTabData(e.name).model.getValue(),type:e.type||e.language}}),new u({codes:r,resourcesMap:Object(n.a)({},this.$themeConfig.resourcesMap),base:this.$site.base,lang:this.$lang}).attach(a).then(function(){s.loading=!1}),t.appendChild(a),this.showPreview=!0,this.changeTab("");case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},h=(a(417),a(5)),d=Object(h.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"code-sandbox"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.sourcesLoaded,expression:"sourcesLoaded"}],staticClass:"main-container"},[a("div",{staticClass:"toolbar"},[a("ul",{staticClass:"actions"},[a("li",[a("button",{staticClass:"btn tab-btn",class:{active:e.showPreview},attrs:{type:"button"},on:{click:e.preview}},[e._v("\n            Run & Preview\n          ")])]),e._l(e.tabs,function(t){return a("li",{key:t.name},[a("button",{staticClass:"tab-btn btn",class:{active:e.currentTab===t.name},attrs:{type:"button"},on:{click:function(a){return e.changeTab(t.name)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])])})],2)]),e._v(" "),a("div",{staticClass:"box",style:{height:e.height}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showEditor,expression:"showEditor"}],staticClass:"editor-container"},[a("div",{ref:"editor",staticClass:"editor"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreview,expression:"showPreview"}],staticClass:"preview-container"},[a("div",{ref:"previewBox",staticClass:"preview-box"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading"},[a("div",{staticClass:"loading-text"},[e._v("\n          Loading...\n        ")])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.sourcesLoaded,expression:"!sourcesLoaded"}],ref:"sourceContainer",staticClass:"source-container"},[e._t("default")],2)])},[],!1,null,null,null);t.default=d.exports}}]);